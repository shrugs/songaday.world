datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

generator photon {
  provider = "prisma-client-js"
}

enum Location {
  Baltimore
  Berkeley
  JupiterFL
  LosAngeles
  NewYork
  Oakland
  SouthingtonCT
  Vermont
  Vienna
}

enum Topic {
  Airport
  Animals
  Anxiety
  Apple
  Bike
  Birthday
  Book
  Childhood
  Christmas
  Commission
  Contest
  Food
  Friend
  Grandma
  Instrumental
  InstrumentalAcousticGuitar
  InstrumentalBaritoneUkelele
  InstrumentalBass
  InstrumentalCongas
  InstrumentalDrumMachine
  InstrumentalDrums
  InstrumentalElectricGuitar
  InstrumentalKeyboard
  InstrumentalOrgan
  InstrumentalPiano
  InstrumentalSamples
  InstrumentalSynths
  InstrumentalUkelele
  InstrumentalVocals
  Internet
  Kids
  Life
  Love
  Motivational
  Nerd
  Objects
  Penguin
  Poetic
  Politics
  Popculture
  PSA
  Ringtone
  Science
  Sex
  Sick
  SocialJustice
  SongADay
  ThemeSong
  TV
  VideoGames
}

enum Mood {
  Angry
  Anxious
  Chill
  Confused
  Drunk
  Excited
  Happy
  Intense
  Pensive
  Sad
  Silly
  Tired
}

enum Beard {
  Clean
  Shadow
  Stubble
}

enum Instrument {
  AcousticGuitar
  Banjo
  BaritoneUke
  Bass
  Congas
  DrumMachine
  Drums
  ElectricGuitar
  Harpsichord
  Keyboard
  Organ
  Piano
  Samples
  Synths
  Uke
  Vocals
}

model Song {
  id          String     @default(cuid()) @id
  number      Int        @unique
  youtubeId   String     @unique
  title       String
  description String
  owner       User?
  location    Location
  topic       Topic
  mood        Mood
  beard       Beard
  instrument  Instrument
  comments    Comment[]
  releasedAt  DateTime   @default(now())
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
}

model MagicCode {
  code      String   @id
  user      User
  createdAt DateTime @default(now())
}

model User {
  id          String     @default(cuid()) @id
  email       String     @unique
  displayName String?
  magicCode   MagicCode?
  song        Song?
}

model Comment {
  id        String   @default(cuid()) @id
  song      Song
  replies   Reply[]
  author    User
  text      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Reply {
  id        String   @default(cuid()) @id
  comment   Comment
  author    User
  text      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
